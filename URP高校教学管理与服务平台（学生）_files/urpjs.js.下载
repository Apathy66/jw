function Urp(){};Urp.prototype={"alert":urpAlert,"confirm":urpConfirm,"pagebar":pagination};function urpAlert(msg,callback){layer.msg(msg);if(typeof callback==='function'){setTimeout(callback,1000)}};function urpConfirm(msg,callback){layer.confirm(msg,{btn:['确定','取消'],closeBtn:0,title:"提示信息"},function(){if(typeof callback==='function'){layer.closeAll('dialog');callback(true)}},function(){if(typeof callback==='function'){callback(false)}})};urp=new Urp();var container;var pageConditions="";function pagination(containerid,pageSizeVal,nowPage,totalNum,method,allowScrollLoading,div_id){if(allowScrollLoading==undefined||allowScrollLoading==""||allowScrollLoading==null){allowScrollLoading="off"}var parr=(pageSizeVal+"").split("_");var pageSize=parseInt(parr[0]);var divPagerid=div_id;nowPage=parseInt(nowPage);totalNum=parseInt(totalNum);container=$("#"+containerid);var pageContent="";if(totalNum>0&&totalNum){var totalPage=totalNum%pageSize==0?totalNum/pageSize:parseInt(totalNum/pageSize)+1;var recFrom="";var recTo="";recFrom=(nowPage-1)*pageSize+1;if(nowPage==totalPage){recTo=totalNum}else{recTo=nowPage*pageSize};pageContent+="<div class='dataTables_paginate paging_simple_numbers' id='sample-table-2_paginate' style='position:relative;'>";pageContent+="<div id='div_page_loading' style='z-index:19900516;position:absolute;left:0;top:-2px;width:100%;text-align:center;border-radius:5px;display:none;'>"+"<img src='/img/icon/pageloading.gif' style='width:28px;height:28px;'></img>"+"</div>";pageContent+="<div style='display:inline-block;'>";pageContent+="<ul id='pagination_ul' class='pagination' style='position:relative;'>";pageContent+="<li id='li_page_"+(nowPage-1)+"' class='paginate_button previous pagebarhand' aria-controls='sample-table-2' tabindex='0' name='sample-table-2_previous' onclick='turntopage(this,"+method+","+divPagerid+");return false;'>";pageContent+="<span style='padding:3px 7px;'>&lt;上一页</span>";pageContent+="</li>";if(totalPage<=7){pageContent+=pageCode(1,totalPage,method)}else{if(nowPage-2<=3&&nowPage+2>=totalPage-2){pageContent+=pageCode(1,totalPage,method)}else if(nowPage<=3&&nowPage+2<totalPage-2){pageContent+=pageCode(1,5,method);pageContent+=noCode();pageContent+=pageCode(totalPage-1,totalPage,method)}else if(nowPage-2<=3&&nowPage+2<totalPage-2){pageContent+=pageCode(1,nowPage+2,method);pageContent+=noCode();pageContent+=pageCode(totalPage-1,totalPage,method)}else if(nowPage-2>3&&nowPage>=totalPage-1){pageContent+=pageCode(1,2,method);pageContent+=noCode();pageContent+=pageCode(totalPage-4,totalPage,method)}else if(nowPage-2>3&&nowPage+2>=totalPage-2){pageContent+=pageCode(1,2,method);pageContent+=noCode();pageContent+=pageCode(nowPage-2,totalPage,method)}else{pageContent+=pageCode(1,2,method);pageContent+=noCode();pageContent+=pageCode(nowPage-2,nowPage+2,method);pageContent+=noCode();pageContent+=pageCode(totalPage-1,totalPage,method)}}pageContent+="<li id='li_page_"+(nowPage+1)+"' class='paginate_button next pagebarhand' aria-controls='sample-table-2' tabindex='0' name='sample-table-2_next' onclick='turntopage(this,"+method+","+divPagerid+");return false;'>";pageContent+="<span style='padding:3px 7px;'>下一页&gt;</span>";pageContent+="</li>";pageContent+="</ul>&nbsp;</div>";pageContent+="<div style='display:inline-block;vertical-align: top;position:relative;font-size:14px;color:#999999;'>"+"<span id='span_page_txt'>转到</span><span style='position:relative;width:42px;height:26px;'>"+"<input id='turnpageto' type='text' value='"+nowPage+"' onfocus='turnpagetoFocus();' onblur='turnpagetoBlur();' style='position:relative;height:26px;width:40px;display:inline-block;line-height:100% !important;font-size:12px;'/>"+"<input type='button' value='确定' id='btn_turnpageto' class='btn btn-primary btn-xs' onclick='turntopage(this,"+method+","+divPagerid+");' style='position:absolute;left:42px;display:none;'/>"+"</span>页 | "+"共<span id='totalPage_show'>"+totalPage+"</span>页 | ";var pSizeSelectWidth="40px";if(allowScrollLoading=="on")pSizeSelectWidth="75px";pageContent+="每页显示<select id='pagination_pageSize' value='' onchange='turntopage(this,"+method+","+divPagerid+")' style='position:relative;height:26px;width:"+pSizeSelectWidth+";line-height:100% !important;padding:0;font-size:12px;'>";if(allowScrollLoading=="on")pageContent+="<option id='page_sl' value='30_sl' >滚动加载</option>";pageContent+="<option value='10'>10</option><option value='20'>20</option><option value='30'>30</option><option value='50'>50</option></select>条| "+"当前显示第";if(totalNum==1){pageContent+=recFrom}else{pageContent+=recFrom+"~"+recTo}pageContent+="条，共"+totalNum+"条</div>";pageContent+="</div>";$(container).html(pageContent);if($("#pagination_pageSize").find("option[value="+pageSizeVal+"]").length!=1){$("#page_sl").val(pageSizeVal)}$("#pagination_pageSize").val(pageSizeVal);if((pageSizeVal+"").indexOf("_sl")!=-1&&nowPage==1){$("#"+div_id).unbind("scroll");$("#"+div_id).scroll(function(){var scrollHeightD=this.scrollHeight;var scrollTopD=this.scrollTop;var clientHeightD=this.clientHeight;if(scrollHeightD-scrollTopD===clientHeightD){var turnpagetoObj=$("#btn_turnpageto");turntopage(turnpagetoObj[0],method,divPagerid)}})}else if((pageSizeVal+"").indexOf("_sl")==-1){$("#"+div_id).unbind('scroll')}setPageBarStatus(nowPage,totalPage)}else{pageContent+="<div style='text-align:right;color:#CC0017;font-size:14px;'>未查询到相关记录集！</div>";$(container).html(pageContent)}};function pageCode(from,to,method){var content="";for(var i=from;i<=to;i++){content+="<li id='li_page_"+i+"' class='paginate_button pagebarhand' aria-controls='sample-table-2' tabindex='0' onclick='turntopage(this,"+method+");return false;'>";content+="<span style='padding:3px 7px;'>"+i+"</span>";content+="</li>"}return content}function noCode(){var content="";content+="<li class='paginate_button disabled' aria-controls='sample-table-2' tabindex='0'>";content+="<span style='padding:3px 7px;'>...</span>";content+="</li>";return content}function turnpagetoFocus(){$("#btn_turnpageto").css("display","inline-block");$("#btn_turnpageto").css("left","40px")}function turnpagetoBlur(){setTimeout(function(){$("#btn_turnpageto").css("display","none");$("#btn_turnpageto").css("left","0px")},500)}function turntopage(obj,getDate,divPagerid){var str1="";if(divPagerid!=undefined){str1=divPagerid.id}var clickPage="";var pageSizeVal=$("#pagination_pageSize").val();if(obj.id=="btn_turnpageto"){clickPage=parseInt($("#turnpageto").val());if((pageSizeVal+"").indexOf("_sl")!=-1){clickPage=clickPage+1}}else if(obj.id=="pagination_pageSize"){clickPage=1;if((pageSizeVal+"").indexOf("_sl")!=-1){$("#pagination_ul").css("display","none");$("#turnpageto").attr("readOnly",true);$("#turnpageto").removeAttr("onfocus");$("#span_page_txt").text("第");$("#turnpageto").val("0")}else{if($("#pagination_ul").css("display")=="none"){$("#pagination_ul").css("display","inline-block");$("#turnpageto").attr("readOnly",false);$("#turnpageto").attr("onfocus","turnpagetoFocus();");$("#span_page_txt").text("转到");$("#"+str1).unbind('scroll')}}}else{var idarr=obj.id.split("_");clickPage=parseInt(idarr[2])}var totalPage=parseInt($("#totalPage_show").text());console.info("totalpage="+totalPage);if((pageSizeVal+"").indexOf("_sl")!=-1&&clickPage!=1&&clickPage>totalPage){urp.alert("数据已加载完！");return}if(clickPage<1){clickPage=1}else if(clickPage>totalPage){clickPage=totalPage}$("#div_page_loading").show();getDate(clickPage,pageSizeVal)}function setPageBarStatus(nowPage,totalPage){$("#li_page_"+nowPage).addClass("active");$("#li_page_"+nowPage).removeAttr("onclick");if(nowPage==1){$("li[name=sample-table-2_previous]").addClass("disabled");$("li[name=sample-table-2_previous]").removeClass("pagebarhand");$("li[name=sample-table-2_previous]").removeAttr("onclick")}if(nowPage==totalPage){$("li[name=sample-table-2_next]").addClass("disabled");$("li[name=sample-table-2_next]").removeClass("pagebarhand");$("li[name=sample-table-2_next]").removeAttr("onclick")}var pageSizeVal=$("#pagination_pageSize").val();if((pageSizeVal+"").indexOf("_sl")!=-1){$("#pagination_ul").css("display","none");$("#turnpageto").attr("readOnly",true);$("#turnpageto").removeAttr("onfocus");$("#span_page_txt").text("第")}else{if($("#pagination_ul").css("display")=="none"){$("#pagination_ul").css("display","inline-block");$("#turnpageto").attr("readOnly",false);$("#turnpageto").attr("onfocus","turnpagetoFocus();");$("#span_page_txt").text("转到")}}}